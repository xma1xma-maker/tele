<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Cyber Clicker V8</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #050510;
            --card: #101025;
            --primary: #00f3ff; /* Ø³Ù…Ø§ÙˆÙŠ Ù…Ø´Ø¹ */
            --secondary: #bc13fe; /* Ø¨Ù†ÙØ³Ø¬ÙŠ Ù†ÙŠÙˆÙ† */
            --text: #ffffff;
            --danger: #ff0055;
            --success: #00ff99;
            --glass: rgba(16, 16, 37, 0.7);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; user-select: none; }

        body {
            font-family: 'Tajawal', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0; height: 100vh;
            display: flex; flex-direction: column; overflow: hidden;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(188, 19, 254, 0.15) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(0, 243, 255, 0.1) 0%, transparent 40%);
        }

        /* --- Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¹Ù„ÙˆÙŠ --- */
        .header {
            padding: 20px; display: flex; justify-content: space-between; align-items: center; z-index: 2;
        }
        .badge {
            background: linear-gradient(45deg, var(--secondary), #6a00ff);
            padding: 5px 15px; border-radius: 20px; font-size: 0.8rem; font-weight: bold;
            box-shadow: 0 0 15px rgba(188, 19, 254, 0.4); border: 1px solid rgba(255,255,255,0.2);
        }

        /* --- Ø§Ù„Ø¹Ø¯Ø§Ø¯ --- */
        .score-box {
            text-align: center; margin-top: 10px; z-index: 2;
        }
        .score-val {
            font-size: 4.5rem; font-weight: 900; line-height: 1;
            text-shadow: 0 0 20px var(--primary);
            background: linear-gradient(to bottom, #fff, var(--primary));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }

        /* --- Ø§Ù„Ø¹Ù…Ù„Ø© (Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…Ù…ÙŠØ²) --- */
        .game-area {
            flex-grow: 1; display: flex; justify-content: center; align-items: center; position: relative; z-index: 1;
        }
        .cyber-coin {
            width: 260px; height: 260px; border-radius: 50%;
            background: radial-gradient(circle, #2a2a50, #000);
            border: 2px solid var(--primary);
            box-shadow: 0 0 30px var(--primary), inset 0 0 20px var(--primary);
            display: flex; align-items: center; justify-content: center;
            font-size: 5rem; cursor: pointer; position: relative;
            transition: transform 0.1s;
        }
        .cyber-coin::after {
            content: '$'; color: var(--primary); text-shadow: 0 0 10px var(--primary);
        }
        .cyber-coin:active { transform: scale(0.95); box-shadow: 0 0 50px var(--primary); }

        /* --- Ø§Ù„Ø·Ø§Ù‚Ø© --- */
        .energy-box {
            margin: 0 20px 10px; background: var(--card); padding: 15px; border-radius: 15px;
            border: 1px solid rgba(255,255,255,0.05); z-index: 2;
        }
        .progress-bg {
            background: #000; height: 10px; border-radius: 5px; margin-top: 8px; overflow: hidden;
        }
        .progress-bar {
            height: 100%; width: 100%; background: linear-gradient(90deg, var(--secondary), var(--primary));
            box-shadow: 0 0 10px var(--secondary); transition: width 0.3s;
        }

        /* --- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙÙ„ÙŠØ© --- */
        .nav {
            display: grid; grid-template-columns: 1fr 1fr; gap: 15px; padding: 10px 20px 30px 20px;
            padding-bottom: calc(20px + env(safe-area-inset-bottom)); z-index: 2;
        }
        .nav-btn {
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: #fff;
            padding: 15px; border-radius: 12px; font-weight: bold; font-size: 1rem; cursor: pointer;
            backdrop-filter: blur(10px); display: flex; align-items: center; justify-content: center; gap: 8px;
        }

        /* --- Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© (Modals) --- */
        .modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); z-index: 100; opacity: 0; pointer-events: none; transition: 0.3s;
            display: flex; align-items: flex-end; justify-content: center; backdrop-filter: blur(5px);
        }
        .modal.active { opacity: 1; pointer-events: all; }
        
        .modal-content {
            background: #15152a; width: 100%; max-width: 500px; border-radius: 25px 25px 0 0;
            padding: 25px; border-top: 2px solid var(--primary); transform: translateY(100%); transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            max-height: 85vh; overflow-y: auto; padding-bottom: 50px;
        }
        .modal.active .modal-content { transform: translateY(0); }

        /* --- ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…Ù‡Ø§Ù… --- */
        .task-card {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05);
            padding: 15px; margin-bottom: 10px; border-radius: 12px; display: flex; justify-content: space-between; align-items: center;
        }
        .task-info { display: flex; gap: 12px; align-items: center; }
        .task-icon { font-size: 1.5rem; }
        .task-title { font-weight: bold; font-size: 0.95rem; display: block; }
        .task-reward { color: var(--success); font-size: 0.8rem; }
        
        .btn-action {
            padding: 8px 15px; border-radius: 8px; border: none; font-weight: bold; cursor: pointer; font-size: 0.85rem;
        }
        .btn-go { background: var(--primary); color: #000; }
        .btn-check { background: var(--secondary); color: #fff; animation: pulse 1s infinite; }

        @keyframes pulse { 0% {opacity:1} 50% {opacity:0.7} 100% {opacity:1} }

        /* Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…ØªØ¬Ø± */
        .inp-group { background: #0b0b18; padding: 15px; border-radius: 10px; margin-bottom: 15px; border: 1px solid #333; }
        .inp { width: 100%; background: transparent; border: 1px solid #444; padding: 12px; color: #fff; border-radius: 8px; margin-bottom: 10px; font-family: inherit; }
        .buy-btn { width: 100%; background: linear-gradient(90deg, var(--primary), var(--secondary)); border: none; padding: 12px; color: #000; font-weight: 900; border-radius: 8px; cursor: pointer; }

    </style>
</head>
<body>

    <div class="header">
        <div class="badge">ğŸ’ VIP Player</div>
        <div style="font-size:0.8rem; opacity:0.7">V8.0 System</div>
    </div>

    <div class="score-box">
        <div class="score-val" id="score">0</div>
        <div style="color:#aaa; font-size:0.9rem">Ø±ØµÙŠØ¯ Ø§Ù„Ù†Ù‚Ø§Ø·</div>
    </div>

    <div class="game-area">
        <div class="cyber-coin" id="coin-btn" onclick="tap(event)"></div>
    </div>

    <div class="energy-box">
        <div style="display:flex; justify-content:space-between; font-size:0.9rem">
            <span>âš¡ Ø§Ù„Ø·Ø§Ù‚Ø©</span>
            <span id="energy-txt">100/100</span>
        </div>
        <div class="progress-bg"><div class="progress-bar" id="energy-bar"></div></div>
    </div>

    <div class="nav">
        <button class="nav-btn" onclick="openModal('shop')">ğŸ›’ Ø§Ù„Ù…ØªØ¬Ø±</button>
        <button class="nav-btn" onclick="openModal('tasks')">ğŸ“‹ Ø§Ù„Ù…Ù‡Ø§Ù…</button>
    </div>

    <div class="modal" id="tasks">
        <div class="modal-content">
            <h2 style="color:var(--primary); margin-top:0">Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù†Ø´Ø·Ø© ğŸ“¡</h2>
            <p style="font-size:0.8rem; color:#aaa; margin-bottom:20px">Ù†ÙØ° Ø§Ù„Ù…Ù‡Ù…Ø© Ù„Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©. <span style="color:var(--danger)">Ø§Ù„Ø®Ø¯Ø§Ø¹ ÙŠØ¹Ø±Ø¶Ùƒ Ù„Ù„Ø­Ø¸Ø±.</span></p>
            
            <div id="tasks-list">
                </div>

            <button class="nav-btn" style="width:100%; margin-top:20px; background:#222" onclick="closeModal('tasks')">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
    </div>

    <div class="modal" id="shop">
        <div class="modal-content">
            <h2 style="color:var(--secondary); margin-top:0">Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…ØªØ§Ø¨Ø¹ÙŠÙ† ğŸš€</h2>
            
            <div class="inp-group">
                <label style="display:block; margin-bottom:5px; color:#aaa">Ø±Ø§Ø¨Ø· Ø§Ù„Ù‚Ù†Ø§Ø© Ø£Ùˆ Ø§Ù„Ø­Ø³Ø§Ø¨:</label>
                <input type="text" id="order-link" class="inp" placeholder="Ù…Ø«Ø§Ù„: @mychannel">
                
                <label style="display:block; margin-bottom:5px; color:#aaa">Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:</label>
                <input type="number" id="order-count" class="inp" placeholder="Ø£Ù‚Ù„ Ø¹Ø¯Ø¯ 10" oninput="calcPrice()">
                
                <div style="display:flex; justify-content:space-between; margin:15px 0; font-weight:bold">
                    <span>Ø§Ù„ØªÙƒÙ„ÙØ©:</span> <span id="total-price" style="color:var(--primary)">0</span>
                </div>
                
                <button class="buy-btn" onclick="submitOrder()">âœ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</button>
            </div>

            <div style="border-top:1px solid #333; padding-top:15px">
                <div class="task-card">
                    <div><b>âš¡ Ø´Ø­Ù† Ø·Ø§Ù‚Ø©</b><br><small style="color:#888">ØªØ¹Ø¨Ø¦Ø© ÙÙˆØ±ÙŠØ©</small></div>
                    <button class="btn-action btn-go" onclick="buyEnergy()">50 Ù†Ù‚Ø·Ø©</button>
                </div>
            </div>

            <button class="nav-btn" style="width:100%; margin-top:20px; background:#222" onclick="closeModal('shop')">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
    </div>

    <script>
        // ===============================================
        // 1ï¸âƒ£ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù‚Ù†ÙˆØ§Øª ÙˆØ§Ù„Ù…Ù‡Ø§Ù… (Ø¹Ø¯Ù„ Ù‡Ù†Ø§ ÙÙ‚Ø·)
        // ===============================================
        const tasksDB = [
            { id: 1, type: 'tg', title: 'Ø§Ø´ØªØ±Ùƒ ÙÙŠ Ø§Ù„Ù‚Ù†Ø§Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©', url: 'https://t.me/YOUR_MAIN_CHANNEL', reward: 100 },
            { id: 2, type: 'tg', title: 'Ù‚Ù†Ø§Ø© Ø§Ù„Ø¥Ø«Ø¨Ø§ØªØ§Øª', url: 'https://t.me/YOUR_PROOF_CHANNEL', reward: 50 },
            { id: 3, type: 'yt', title: 'Ø§Ø´ØªØ±Ùƒ ÙÙŠ ÙŠÙˆØªÙŠÙˆØ¨', url: 'https://youtube.com/@YOUR_CHANNEL', reward: 150 },
            { id: 4, type: 'in', title: 'ØªØ§Ø¨Ø¹Ù†ÙŠ Ø§Ù†Ø³ØªÙ‚Ø±Ø§Ù…', url: 'https://instagram.com/YOUR_INSTA', reward: 100 },
            { id: 5, type: 'tg', title: 'Ù‚Ù†Ø§Ø© Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ', url: 'https://t.me/SUPPORT_CHANNEL', reward: 50 }
        ];

        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø¯Ù…Ù† Ù„Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø·Ù„Ø¨Ø§Øª
        const BOT_TOKEN = "Ø¶Ø¹_ØªÙˆÙƒÙ†_Ø§Ù„Ø¨ÙˆØª_Ù‡Ù†Ø§"; 
        const ADMIN_ID = "Ø¶Ø¹_Ø§Ù„Ø¢ÙŠØ¯ÙŠ_Ø§Ù„Ø®Ø§Øµ_Ø¨Ùƒ_Ù‡Ù†Ø§"; 

        // ===============================================
        // 2ï¸âƒ£ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠ (Ù„Ø§ ØªØ¹Ø¯Ù„ Ø´ÙŠØ¦Ø§Ù‹ Ø¨Ø§Ù„Ø£Ø³ÙÙ„)
        // ===============================================
        let score = localStorage.getItem('score_v8') ? parseInt(localStorage.getItem('score_v8')) : 0;
        let energy = 100; const maxEnergy = 100;
        // Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© Ø³Ø§Ø¨Ù‚Ø§Ù‹
        let completedTasks = JSON.parse(localStorage.getItem('completed_tasks_v8')) || [];

        updateUI();
        renderTasks();

        // --- Ø§Ù„Ù†Ù‚Ø± ---
        function tap(e) {
            if (energy > 0) {
                score++; energy--; saveData(); updateUI();
                showFloat(e.clientX, e.clientY);
                if (navigator.vibrate) navigator.vibrate(20);
            }
        }

        // --- Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ù‡Ø§Ù… (Ø§Ù„Ø°ÙƒÙŠ) ---
        function renderTasks() {
            const list = document.getElementById('tasks-list');
            list.innerHTML = ''; // Ù…Ø³Ø­ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©

            // ØªØµÙÙŠØ© Ø§Ù„Ù…Ù‡Ø§Ù…: Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…Ù‡Ø§Ù… ØºÙŠØ± Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© ÙÙ‚Ø·
            const activeTasks = tasksDB.filter(task => !completedTasks.includes(task.id));

            if (activeTasks.length === 0) {
                list.innerHTML = '<div style="text-align:center; padding:20px; color:#888">ğŸ‰ Ù„Ù‚Ø¯ Ø£ØªÙ…Ù…Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù‡Ø§Ù… Ø­Ø§Ù„ÙŠØ§Ù‹!</div>';
                return;
            }

            activeTasks.forEach(task => {
                let icon = 'ğŸ”—';
                if(task.type === 'tg') icon = 'âœˆï¸';
                if(task.type === 'yt') icon = 'ğŸ”´';
                if(task.type === 'in') icon = 'ğŸ“¸';

                const html = `
                <div class="task-card" id="task-${task.id}">
                    <div class="task-info">
                        <span class="task-icon">${icon}</span>
                        <div>
                            <span class="task-title">${task.title}</span>
                            <span class="task-reward">+${task.reward} Ù†Ù‚Ø·Ø©</span>
                        </div>
                    </div>
                    <button class="btn-action btn-go" id="btn-${task.id}" onclick="openTask(${task.id}, '${task.url}', ${task.reward})">ØªÙ†ÙÙŠØ°</button>
                </div>`;
                list.innerHTML += html;
            });
        }

        function openTask(id, url, reward) {
            // 1. ÙØªØ­ Ø§Ù„Ø±Ø§Ø¨Ø·
            window.open(url, '_blank');
            
            // 2. ØªØºÙŠÙŠØ± Ø§Ù„Ø²Ø± Ø¥Ù„Ù‰ "ØªØ­Ù‚Ù‚"
            const btn = document.getElementById(`btn-${id}`);
            btn.innerText = "ØªØ­Ù‚Ù‚ â³";
            btn.className = "btn-action btn-check";
            btn.onclick = function() { verifyTask(id, reward); };
        }

        function verifyTask(id, reward) {
            // 3. Ø§Ù„ØªØ­Ø°ÙŠØ± Ø§Ù„ØµØ§Ø±Ù…
            const confirmMsg = "âš ï¸ ØªØ­Ø°ÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ù…Ù†:\n\nÙ‡Ù„ Ù‚Ù…Øª Ø¨Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙØ¹Ù„Ø§Ù‹ØŸ\nØ³ÙŠÙ‚ÙˆÙ… Ø§Ù„Ø¨ÙˆØª Ø¨Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ø´ØªØ±Ø§ÙƒÙƒ ÙŠØ¯ÙˆÙŠØ§Ù‹.\nØ¥Ø°Ø§ ØªØ¨ÙŠÙ† Ø£Ù†Ùƒ Ù„Ù… ØªØ´ØªØ±ÙƒØŒ Ø³ÙŠØªÙ… Ø­Ø¸Ø± Ø­Ø³Ø§Ø¨Ùƒ Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ ÙˆØªØµÙÙŠØ± Ù†Ù‚Ø§Ø·Ùƒ.\n\nÙ‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ";
            
            if (confirm(confirmMsg)) {
                // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ù‚Ø§Ø·
                score += reward;
                // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ù‡Ù…Ø© ÙƒÙ…ÙƒØªÙ…Ù„Ø©
                completedTasks.push(id);
                localStorage.setItem('completed_tasks_v8', JSON.stringify(completedTasks));
                saveData();
                updateUI();
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© (Ø³ØªØ®ØªÙÙŠ Ø§Ù„Ù…Ù‡Ù…Ø©)
                renderTasks();
                
                alert(`âœ… ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚! Ø£Ø¶ÙŠÙØª ${reward} Ù†Ù‚Ø·Ø© Ù„Ø±ØµÙŠØ¯Ùƒ.`);
            }
        }

        // --- Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØªØ¬Ø± ÙˆØ§Ù„Ø·Ù„Ø¨Ø§Øª ---
        function calcPrice() {
            const count = document.getElementById('order-count').value;
            document.getElementById('total-price').innerText = (count * 4) + " Ù†Ù‚Ø·Ø©";
        }

        function submitOrder() {
            const link = document.getElementById('order-link').value;
            const count = document.getElementById('order-count').value;
            const cost = count * 4;

            if(!link || count < 10) { alert("ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø· ÙˆØ£Ù† Ø§Ù„Ø¹Ø¯Ø¯ ÙÙˆÙ‚ 10"); return; }
            if(score < cost) { alert(`Ù†Ù‚Ø§Ø·Ùƒ ØºÙŠØ± ÙƒØ§ÙÙŠØ©! ØªØ­ØªØ§Ø¬ ${cost}`); return; }

            // Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨
            const msg = `ğŸ”¥ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ %0A Ø§Ù„Ø±Ø§Ø¨Ø·: ${link} %0A Ø§Ù„Ø¹Ø¯Ø¯: ${count} %0A Ø§Ù„Ø³Ø¹Ø±: ${cost}`;
            const url = `https://api.telegram.org/bot${8207071306:AAFqIFqsANxB7srrBEsUfZJkb4xzhsY5FMQ}/sendMessage?chat_id=${1759629479}&text=${msg}`;

            // Ù†Ø®ØµÙ… Ø§Ù„Ù†Ù‚Ø§Ø· Ø£ÙˆÙ„Ø§Ù‹ Ù„Ø¶Ù…Ø§Ù† Ø¹Ø¯Ù… Ø§Ù„ØªÙƒØ±Ø§Ø± Ø§Ù„Ø³Ø±ÙŠØ¹
            const oldScore = score;
            score -= cost;
            updateUI();

            fetch(url).then(res => {
                if(res.ok) {
                    saveData();
                    alert("âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­!");
                    closeModal('shop');
                } else {
                    score = oldScore; // Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù†Ù‚Ø§Ø· ÙÙŠ Ø­Ø§Ù„ Ø§Ù„ÙØ´Ù„
                    updateUI();
                    alert("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ØŒ Ø¬Ø±Ø¨ Ù„Ø§Ø­Ù‚Ø§Ù‹.");
                }
            }).catch(e => {
                // ÙÙŠ Ø­Ø§Ù„ ÙƒØ§Ù† Ø§Ù„Ù…ØªØµÙØ­ ÙŠÙ…Ù†Ø¹ Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± (CORS) Ù†Ù‚ÙˆÙ… Ø¨Ø§Ù„Ù…Ø­Ø§ÙƒØ§Ø©
                saveData();
                alert("âœ… ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø·Ù„Ø¨ Ù…Ø­Ù„ÙŠØ§Ù‹ (CORS Mode) ÙˆØ³ÙŠØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°.");
                closeModal('shop');
            });
        }

        function buyEnergy() {
            if(score >= 50) { score -= 50; energy = maxEnergy; updateUI(); saveData(); alert("ØªÙ… Ø§Ù„Ø´Ø­Ù†!"); }
            else { alert("Ù„Ø§ ØªÙ…Ù„Ùƒ Ù†Ù‚Ø§Ø·Ø§Ù‹ ÙƒØ§ÙÙŠØ©"); }
        }

        // --- ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù†Ø¸Ø§Ù… ---
        function updateUI() {
            document.getElementById('score').innerText = score.toLocaleString();
            document.getElementById('energy-txt').innerText = `${energy}/${maxEnergy}`;
            document.getElementById('energy-bar').style.width = (energy/maxEnergy*100) + '%';
        }
        function saveData() { localStorage.setItem('score_v8', score); }
        function openModal(id) { document.getElementById(id).classList.add('active'); }
        function closeModal(id) { document.getElementById(id).classList.remove('active'); }
        setInterval(() => { if(energy < maxEnergy) { energy++; updateUI(); } }, 3000);
        
        function showFloat(x, y) {
            const el = document.createElement('div'); el.innerText = '+1';
            el.style.cssText = `position:fixed; left:${x}px; top:${y}px; color:#fff; font-weight:bold; pointer-events:none; animation:float 0.8s forwards;`;
            document.body.appendChild(el); setTimeout(() => el.remove(), 800);
        }
        document.head.insertAdjacentHTML("beforeend", `<style>@keyframes float {to{transform:translateY(-80px);opacity:0}}</style>`)
    </script>
</body>
</html>

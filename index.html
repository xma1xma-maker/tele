<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Clicker Store V2</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #0a0a0a;
            --primary: #0098EA;
            --secondary: #f39c12;
            --surface: rgba(255, 255, 255, 0.08);
            --border: rgba(255, 255, 255, 0.1);
            --text-main: #ffffff;
            --success: #00E096;
            --danger: #FF3B30;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; user-select: none; }
        
        body {
            font-family: 'Cairo', sans-serif;
            background-color: var(--bg-dark);
            background-image: radial-gradient(circle at 50% 0%, #1a3a5a, #000);
            color: var(--text-main);
            margin: 0; min-height: 100vh;
            display: flex; flex-direction: column;
            padding-bottom: 95px;
            overflow-x: hidden;
        }

        /* --- Header --- */
        .header {
            padding: 15px 20px;
            display: flex; justify-content: space-between; align-items: center;
            background: rgba(0,0,0,0.2); backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border);
            z-index: 10;
        }
        .user-badge { display: flex; align-items: center; gap: 10px; }
        .avatar { width: 35px; height: 35px; background: linear-gradient(45deg, var(--primary), #00d2ff); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.2rem; }
        .rank-info { display: flex; flex-direction: column; line-height: 1.2; }

        /* --- Score --- */
        .score-container { text-align: center; margin-top: 15px; }
        .score-val { font-size: 2.8rem; font-weight: 900; color: #fff; text-shadow: 0 0 15px rgba(0, 152, 234, 0.5); }
        .score-label { font-size: 0.9rem; color: #aaa; margin-top: -5px; }

        /* --- GAME AREA (COIN) --- */
        .game-area {
            flex-grow: 1; display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            position: relative; margin: 20px 0;
        }
        .coin {
            width: 240px; height: 240px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #4facfe, #00f2fe);
            border: 8px solid rgba(255,255,255,0.1);
            box-shadow: 0 0 50px rgba(0, 152, 234, 0.4), inset 0 0 20px rgba(0,0,0,0.2);
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; transition: transform 0.1s;
            position: relative; z-index: 5;
        }
        .coin:active { transform: scale(0.95); }
        .coin svg { width: 60%; fill: #fff; filter: drop-shadow(0 5px 10px rgba(0,0,0,0.3)); }

        /* Floating Number Animation */
        .float-num {
            position: absolute; color: #fff; font-weight: 900; font-size: 2rem;
            pointer-events: none; z-index: 100; text-shadow: 0 0 5px var(--primary);
            animation: floatUp 0.8s forwards;
        }
        @keyframes floatUp { 0% { opacity: 1; transform: translateY(0); } 100% { opacity: 0; transform: translateY(-80px); } }

        /* Energy Bar */
        .energy-container { width: 80%; margin: 10px auto; }
        .energy-info { display: flex; justify-content: space-between; font-size: 0.9rem; margin-bottom: 5px; color: #ddd; }
        .energy-bg { width: 100%; height: 12px; background: rgba(255,255,255,0.1); border-radius: 6px; overflow: hidden; }
        .energy-fill { height: 100%; background: linear-gradient(90deg, #f39c12, #f1c40f); width: 100%; transition: width 0.2s; }

        /* --- Store Grid --- */
        .section-title { padding: 0 20px; margin: 10px 0 5px 0; font-size: 1.1rem; color: #aaa; }
        .store-grid {
            display: grid; grid-template-columns: 1fr 1fr; gap: 10px;
            padding: 0 15px 20px 15px;
        }
        .store-card {
            background: var(--surface); border: 1px solid var(--border);
            border-radius: 15px; padding: 15px;
            text-align: center; cursor: pointer; transition: 0.2s;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .store-card:active { transform: scale(0.95); background: rgba(255,255,255,0.12); }
        .card-icon { font-size: 2rem; margin-bottom: 5px; }
        .card-title { font-weight: bold; font-size: 0.9rem; margin-bottom: 5px; }
        .card-price { color: var(--secondary); font-weight: bold; font-size: 0.8rem; background: rgba(243, 156, 18, 0.15); padding: 2px 8px; border-radius: 8px; }

        /* --- Bottom Nav --- */
        .nav-bar {
            position: fixed; bottom: 15px; left: 15px; right: 15px;
            background: rgba(30, 30, 30, 0.95); backdrop-filter: blur(20px);
            border-radius: 25px; border: 1px solid rgba(255,255,255,0.08);
            display: flex; justify-content: space-around;
            padding: 10px; box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            z-index: 500;
        }
        .nav-item {
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            color: #888; font-size: 0.75rem; gap: 4px; padding: 5px 10px;
            border-radius: 15px; transition: 0.2s; width: 60px; cursor: pointer;
        }
        .nav-item.active { background: rgba(255,255,255,0.1); color: #fff; transform: translateY(-5px); }

        /* --- Modals --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); z-index: 900;
            opacity: 0; visibility: hidden; transition: 0.3s;
            backdrop-filter: blur(5px); display: flex; justify-content: center; align-items: flex-end;
        }
        .modal-overlay.active { opacity: 1; visibility: visible; }
        .modal-content {
            background: #1a1a1a; width: 100%; max-width: 600px;
            border-radius: 30px 30px 0 0; padding: 25px;
            transform: translateY(100%); transition: 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
            border-top: 1px solid var(--border); max-height: 85vh; overflow-y: auto;
        }
        .modal-overlay.active .modal-content { transform: translateY(0); }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .close-btn { background: #333; border: none; width: 30px; height: 30px; border-radius: 50%; color: #fff; cursor: pointer; }

        /* UI Elements */
        .inp { width: 100%; padding: 15px; background: #222; border: 1px solid #444; color: #fff; border-radius: 12px; margin-bottom: 15px; text-align: center; }
        .btn-main { width: 100%; padding: 16px; background: var(--primary); color: #fff; border: none; border-radius: 14px; font-weight: bold; cursor: pointer; margin-top: 10px; }
        .btn-sec { width: 100%; padding: 12px; background: #333; color: #fff; border: none; border-radius: 12px; font-weight: bold; cursor: pointer; margin-top: 10px; }
        .list-item { background: rgba(255,255,255,0.05); padding: 15px; border-radius: 15px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; }
        .countdown-box { font-size: 2rem; font-weight: 900; margin: 20px 0; font-variant-numeric: tabular-nums; }
    </style>
</head>
<body>

    <div class="header">
        <div class="user-badge">
            <div class="avatar">ğŸ‘¤</div>
            <div class="rank-info">
                <span class="rank-name" id="user-name">Guest</span>
                <span style="font-size:0.75rem; color:#888" id="user-id">ID: ...</span>
            </div>
        </div>
        <button class="btn-main" style="width:auto; margin:0; padding:5px 15px; font-size:0.8rem; background:linear-gradient(45deg, #f39c12, #d35400)" onclick="openBoostModal()">ğŸš€ ØªØ±Ù‚ÙŠØ©</button>
    </div>

    <div class="score-container">
        <div class="score-val" id="score">0</div>
        <div class="score-label">Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ</div>
    </div>

    <div class="game-area">
        <div class="coin" onpointerdown="handleTap(event)">
            <svg viewBox="0 0 24 24"><path d="M12 22L1.5 8 12 2l10.5 6L12 22zm0-2.5l8-10-8-5.5-8 5.5 8 10z"/></svg>
        </div>
    </div>

    <div class="energy-container">
        <div class="energy-info">
            <span>âš¡ Ø§Ù„Ø·Ø§Ù‚Ø©</span>
            <span id="energy-txt">500/500</span>
        </div>
        <div class="energy-bg"><div class="energy-fill" id="energy-bar"></div></div>
    </div>

    <h3 class="section-title">Ø§ØµØ±Ù Ù†Ù‚Ø§Ø·Ùƒ ğŸ‘‡</h3>
    <div class="store-grid">
        <div class="store-card" onclick="openOrderModal('insta', 'Ù…ØªØ§Ø¨Ø¹ÙŠÙ† Ø§Ù†Ø³ØªÙ‚Ø±Ø§Ù…', 5000)">
            <div class="card-icon">ğŸ“¸</div>
            <div class="card-title">Ø§Ù†Ø³ØªÙ‚Ø±Ø§Ù…</div>
            <div class="card-price">5,000 P</div>
        </div>
        <div class="store-card" onclick="openOrderModal('tele', 'Ø£Ø¹Ø¶Ø§Ø¡ ØªÙ„ÙŠØ¬Ø±Ø§Ù…', 5000)">
            <div class="card-icon">âœˆï¸</div>
            <div class="card-title">ØªÙ„ÙŠØ¬Ø±Ø§Ù…</div>
            <div class="card-price">5,000 P</div>
        </div>
        <div class="store-card" onclick="openOrderModal('tiktok', 'Ù…ØªØ§Ø¨Ø¹ÙŠÙ† ØªÙŠÙƒ ØªÙˆÙƒ', 6000)">
            <div class="card-icon">ğŸµ</div>
            <div class="card-title">ØªÙŠÙƒ ØªÙˆÙƒ</div>
            <div class="card-price">6,000 P</div>
        </div>
        <div class="store-card" onclick="openOrderModal('cash', 'Ø±ØµÙŠØ¯ $5', 50000)">
            <div class="card-icon">ğŸ’µ</div>
            <div class="card-title">ÙƒØ§Ø´ $5</div>
            <div class="card-price">50,000 P</div>
        </div>
    </div>

    <div class="nav-bar">
        <div class="nav-item active">
            <span style="font-size:1.4rem">ğŸ </span> <span>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
        </div>
        <div class="nav-item" onclick="openTasksModal()">
            <span style="font-size:1.4rem">ğŸ“‹</span> <span>Ù…Ù‡Ø§Ù…</span>
        </div>
        <div class="nav-item" onclick="startQuiz()">
            <span style="font-size:1.4rem">ğŸ§ </span> <span>Ù…Ø³Ø§Ø¨Ù‚Ø©</span>
        </div>
        <div class="nav-item" onclick="openDailyModal()">
            <span style="font-size:1.4rem">ğŸ“…</span> <span>ÙŠÙˆÙ…ÙŠ</span>
        </div>
    </div>

    <div class="modal-overlay" id="orderModal">
        <div class="modal-content">
            <div class="modal-header"><h3 id="order-title">Ø·Ù„Ø¨</h3><button class="close-btn" onclick="closeModal('orderModal')">âœ•</button></div>
            <div style="text-align:center; margin-bottom:20px">
                <div style="font-size:3rem" id="order-icon">ğŸ“¦</div>
                <p style="color:#aaa">Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ø§Ø¨Ø· Ù„Ù„ØªÙ†ÙÙŠØ°</p>
                <h3 style="color:var(--secondary)" id="order-price-lbl">0</h3>
            </div>
            <input type="text" class="inp" id="order-link" placeholder="Ø§Ù„Ø±Ø§Ø¨Ø· / Ø§Ù„Ù…Ø¹Ø±Ù">
            <button class="btn-main" onclick="submitOrder()">ØªØ£ÙƒÙŠØ¯ âœ…</button>
        </div>
    </div>

    <div class="modal-overlay" id="boostModal">
        <div class="modal-content" style="text-align:center">
            <div class="modal-header"><h3>ØªØ±Ù‚ÙŠØ© Ø§Ù„Ø¶ØºØ·</h3><button class="close-btn" onclick="closeModal('boostModal')">âœ•</button></div>
            <div style="font-size:4rem; margin:10px 0">ğŸ‘†</div>
            <h3>Ø§Ù„Ù†Ù‚Ø±Ø© Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø© (Multitap)</h3>
            <p style="color:#aaa; margin-bottom:20px">Ø²ÙŠØ§Ø¯Ø© Ø¹Ø¯Ø¯ Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„ØªÙŠ ØªØ­ØµÙ„ Ø¹Ù„ÙŠÙ‡Ø§ ÙÙŠ ÙƒÙ„ Ø¶ØºØ·Ø©.</p>
            
            <div class="list-item">
                <div>Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø­Ø§Ù„ÙŠ</div>
                <div style="font-weight:bold; color:var(--primary)" id="boost-lvl">1</div>
            </div>
            
            <button class="btn-main" onclick="buyBoost()" id="boost-btn">ØªØ±Ù‚ÙŠØ© Ø¨Ù€ 500 Ù†Ù‚Ø·Ø©</button>
        </div>
    </div>

    <div class="modal-overlay" id="tasks">
        <div class="modal-content">
            <div class="modal-header"><h3>Ø§Ù„Ù…Ù‡Ø§Ù…</h3><button class="close-btn" onclick="closeModal('tasks')">âœ•</button></div>
            <div id="tasks-list"></div>
        </div>
    </div>

    <div class="modal-overlay" id="quiz">
        <div class="modal-content" style="text-align:center">
            <div class="modal-header"><h3>Ù…Ø³Ø§Ø¨Ù‚Ø©</h3><button class="close-btn" onclick="closeModal('quiz')">âœ•</button></div>
            <h3 id="q-txt">?</h3>
            <div id="q-opts" style="margin-top:20px"></div>
        </div>
    </div>

    <div class="modal-overlay" id="daily">
        <div class="modal-content" style="text-align:center">
            <div class="modal-header"><h3>ÙŠÙˆÙ…ÙŠ</h3><button class="close-btn" onclick="closeModal('daily')">âœ•</button></div>
            <div style="font-size:3rem">ğŸ</div>
            
            <div id="daily-ready" style="display:none">
                <p>Ø§Ø³ØªÙ„Ù… Ù‡Ø¯ÙŠØªÙƒ Ø§Ù„ÙŠÙˆÙ…ÙŠØ©!</p>
                <button class="btn-main" onclick="claimDaily()">Ø§Ø³ØªÙ„Ø§Ù… (+1000)</button>
            </div>
            
            <div id="daily-timer" style="display:none">
                <p>Ø§Ù„Ù‡Ø¯ÙŠØ© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø© Ø¨Ø¹Ø¯:</p>
                <div class="countdown-box" id="timer-txt">00:00:00</div>
                <button class="btn-sec" onclick="closeModal('daily')">Ø¥ØºÙ„Ø§Ù‚</button>
            </div>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        // âš ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ø¯Ù…Ù†
        const CONFIG = {
            adminUsername: "YOUR_USERNAME", // Ø¶Ø¹ Ù…Ø¹Ø±ÙÙƒ Ù‡Ù†Ø§ Ø¨Ø¯ÙˆÙ† @
            maxEnergy: 1000
        };

        // Ø§Ù„Ø­Ø§Ù„Ø© (State) Ù…Ø¹ Ø¥Ø¶Ø§ÙØ© Multitap
        let state = {
            score: parseInt(localStorage.getItem('cs_score') || 0),
            energy: parseInt(localStorage.getItem('cs_energy') || 1000),
            lastDaily: parseInt(localStorage.getItem('cs_lastDaily') || 0),
            completedTasks: JSON.parse(localStorage.getItem('cs_tasks') || "[]"),
            multitap: parseInt(localStorage.getItem('cs_multitap') || 1) // Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù†Ù‚Ø±
        };

        let currentOrder = {};
        const TASKS = [
            {id:1, txt:"Ø§Ø´ØªØ±Ùƒ Ø¨Ø§Ù„Ù‚Ù†Ø§Ø©", r:500, url:"https://t.me/telegram"},
            {id:2, txt:"ØªØ§Ø¨Ø¹Ù†Ø§ Ø§Ù†Ø³ØªÙ‚Ø±Ø§Ù…", r:300, url:"https://instagram.com"}
        ];
        const QUIZ = [
            {q:"Ø¹Ø§ØµÙ…Ø© Ù…ØµØ±ØŸ", a:["Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©","Ø§Ù„Ø§Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©"], c:0},
            {q:"Ù„ÙˆÙ† Ø§Ù„Ø³Ù…Ø§Ø¡ØŸ", a:["Ø£Ø­Ù…Ø±","Ø£Ø²Ø±Ù‚"], c:1}
        ];

        window.onload = () => {
            updateUI();
            if(tg.initDataUnsafe?.user) {
                document.getElementById('user-name').innerText = tg.initDataUnsafe.user.first_name;
                document.getElementById('user-id').innerText = "ID: " + tg.initDataUnsafe.user.id;
            }
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø·Ø§Ù‚Ø©
            setInterval(() => {
                if(state.energy < CONFIG.maxEnergy) {
                    state.energy += state.multitap; // Ø´Ø­Ù† Ø§Ø³Ø±Ø¹ Ù…Ø¹ Ø§Ù„ØªØ±Ù‚ÙŠØ©
                    if(state.energy > CONFIG.maxEnergy) state.energy = CONFIG.maxEnergy;
                    updateEnergyUI();
                }
            }, 1000);
            
            setInterval(save, 5000);
        };

        function save() {
            localStorage.setItem('cs_score', state.score);
            localStorage.setItem('cs_energy', state.energy);
            localStorage.setItem('cs_lastDaily', state.lastDaily);
            localStorage.setItem('cs_tasks', JSON.stringify(state.completedTasks));
            localStorage.setItem('cs_multitap', state.multitap);
        }

        // --- Ù†Ø¸Ø§Ù… Ø§Ù„Ø¶ØºØ· (Clicker) Ø§Ù„Ù…Ø¹Ø¯Ù„ ---
        function handleTap(e) {
            // Ù†Ø³ØªÙ‡Ù„Ùƒ Ø·Ø§Ù‚Ø© ØªØ³Ø§ÙˆÙŠ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù†Ù‚Ø±Ø© Ù„ÙŠÙƒÙˆÙ† Ø¹Ø§Ø¯Ù„Ø§Ù‹ØŒ Ø£Ùˆ 1 Ù„ÙŠÙƒÙˆÙ† Ø³Ù‡Ù„Ø§Ù‹. Ø³Ø£Ø¬Ø¹Ù„Ù‡ ÙŠØ³ØªÙ‡Ù„Ùƒ 1 Ø·Ø§Ù‚Ø© ÙÙ‚Ø·.
            if(state.energy >= 1) {
                state.energy--;
                state.score += state.multitap; // Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù†Ù‚Ø§Ø· Ø­Ø³Ø¨ Ø§Ù„Ù…Ø³ØªÙˆÙ‰
                
                document.getElementById('score').innerText = state.score.toLocaleString();
                updateEnergyUI();

                if(tg.HapticFeedback) tg.HapticFeedback.impactOccurred('light');
                showFloatNum(e.clientX, e.clientY, state.multitap);
            }
        }

        function showFloatNum(x, y, val) {
            const el = document.createElement('div');
            el.className = 'float-num';
            el.innerText = '+' + val;
            const rX = x + (Math.random() * 40 - 20);
            const rY = y - 20;
            el.style.left = rX + 'px';
            el.style.top = rY + 'px';
            document.body.appendChild(el);
            setTimeout(() => el.remove(), 800);
        }

        function updateEnergyUI() {
            document.getElementById('energy-txt').innerText = `${state.energy}/${CONFIG.maxEnergy}`;
            document.getElementById('energy-bar').style.width = (state.energy / CONFIG.maxEnergy * 100) + "%";
        }
        function updateUI() {
            document.getElementById('score').innerText = state.score.toLocaleString();
            updateEnergyUI();
        }

        // --- Ù†Ø¸Ø§Ù… ØªØ±Ù‚ÙŠØ© Ø§Ù„Ø¶ØºØ· (Boost) ---
        function openBoostModal() {
            openModal('boostModal');
            document.getElementById('boost-lvl').innerText = state.multitap;
            
            // Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„Ø³Ø¹Ø±: 500 * (2 ^ (Ø§Ù„Ù…Ø³ØªÙˆÙ‰ - 1))
            const cost = 500 * Math.pow(2, state.multitap - 1);
            const btn = document.getElementById('boost-btn');
            btn.innerText = `ØªØ±Ù‚ÙŠØ© Ø¨Ù€ ${cost.toLocaleString()} Ù†Ù‚Ø·Ø©`;
            btn.onclick = () => buyBoost(cost);
        }

        function buyBoost(cost) {
            if(state.score >= cost) {
                state.score -= cost;
                state.multitap++;
                save();
                updateUI();
                tg.showAlert(`ØªÙ…Øª Ø§Ù„ØªØ±Ù‚ÙŠØ© Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ ${state.multitap}!`);
                openBoostModal(); // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯
            } else {
                tg.showAlert("Ù†Ù‚Ø§Ø·Ùƒ ØºÙŠØ± ÙƒØ§ÙÙŠØ©!");
            }
        }

        // --- Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØªØ¬Ø± ---
        function openOrderModal(type, name, price) {
            currentOrder = { type, name, price };
            document.getElementById('order-title').innerText = name;
            document.getElementById('order-price-lbl').innerText = price.toLocaleString();
            let icon = type==='insta'?'ğŸ“¸': type==='tele'?'âœˆï¸': type==='tiktok'?'ğŸµ':'ğŸ’µ';
            document.getElementById('order-icon').innerText = icon;
            openModal('orderModal');
        }

        function submitOrder() {
            const link = document.getElementById('order-link').value;
            if(!link || link.length < 3) return tg.showAlert("Ø§Ù„Ø±Ø§Ø¨Ø· ØºÙŠØ± ØµØ­ÙŠØ­!");
            if(state.score < currentOrder.price) return tg.showAlert("Ù†Ù‚Ø§Ø·Ùƒ ØºÙŠØ± ÙƒØ§ÙÙŠØ©!");

            state.score -= currentOrder.price;
            save();
            updateUI();

            const user = tg.initDataUnsafe.user;
            const uname = user ? `@${user.username || 'NoUser'} (${user.id})` : "Guest";
            const msg = `ğŸ›’ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯:\nğŸ‘¤: ${uname}\nğŸ“¦: ${currentOrder.name}\nğŸ”—: ${link}\nğŸ’°: ${currentOrder.price}`;

            if(CONFIG.adminUsername !== "YOUR_USERNAME") {
                tg.openTelegramLink(`https://t.me/${CONFIG.adminUsername}?text=${encodeURIComponent(msg)}`);
                closeModal('orderModal');
                document.getElementById('order-link').value = "";
            } else {
                tg.showAlert("ØªÙ… (ÙŠØ±Ø¬Ù‰ Ø¶Ø¨Ø· Ø§Ø³Ù… Ø§Ù„Ø£Ø¯Ù…Ù†)");
            }
        }

        // --- Ù†Ø¸Ø§Ù… Ø§Ù„Ù‡Ø¯ÙŠØ© Ø§Ù„ÙŠÙˆÙ…ÙŠØ© (Ø§Ù„Ù…ØµÙ„Ø­) ---
        let dailyTimerInt;

        function openDailyModal() {
            openModal('daily');
            checkDailyReward();
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯Ø§Ø¯ ÙƒÙ„ Ø«Ø§Ù†ÙŠØ© Ø£Ø«Ù†Ø§Ø¡ ÙØªØ­ Ø§Ù„Ù†Ø§ÙØ°Ø©
            if(dailyTimerInt) clearInterval(dailyTimerInt);
            dailyTimerInt = setInterval(checkDailyReward, 1000);
        }

        function checkDailyReward() {
            const now = Date.now();
            const diff = now - state.lastDaily;
            const cooldown = 86400000; // 24 Ø³Ø§Ø¹Ø©

            const readyDiv = document.getElementById('daily-ready');
            const timerDiv = document.getElementById('daily-timer');
            const timerTxt = document.getElementById('timer-txt');

            if(diff >= cooldown) {
                // Ø§Ù„Ù‡Ø¯ÙŠØ© Ø¬Ø§Ù‡Ø²Ø©
                readyDiv.style.display = 'block';
                timerDiv.style.display = 'none';
            } else {
                // ÙˆÙ‚Øª Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
                readyDiv.style.display = 'none';
                timerDiv.style.display = 'block';
                
                const remaining = cooldown - diff;
                const h = Math.floor(remaining / (1000 * 60 * 60));
                const m = Math.floor((remaining % (1000 * 60 * 60)) / (1000 * 60));
                const s = Math.floor((remaining % (1000 * 60)) / 1000);
                
                timerTxt.innerText = `${h < 10 ? '0'+h : h}:${m < 10 ? '0'+m : m}:${s < 10 ? '0'+s : s}`;
            }
        }

        function claimDaily() {
            state.score += 1000;
            state.lastDaily = Date.now();
            save();
            updateUI();
            checkDailyReward(); // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© ÙÙˆØ±Ø§Ù‹
            tg.showAlert("ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… 1000 Ù†Ù‚Ø·Ø©!");
        }

        // --- Ù…Ù‡Ø§Ù… ÙˆÙ…Ø³Ø§Ø¨Ù‚Ø© ---
        function openTasksModal() {
            openModal('tasks');
            const d = document.getElementById('tasks-list'); d.innerHTML = '';
            TASKS.forEach(t => {
                const done = state.completedTasks.includes(t.id);
                d.innerHTML += `<div class="list-item"><div><b>${t.txt}</b><br><small style="color:var(--success)">+${t.r}</small></div>
                ${done ? '<small>ØªÙ…</small>' : `<button onclick="doTask(${t.id},'${t.url}',${t.r})" style="background:var(--primary);border:none;color:#fff;padding:5px 10px;border-radius:5px">Ù†ÙØ°</button>`}</div>`;
            });
        }
        function doTask(id, url, r) {
            window.open(url);
            setTimeout(() => { 
                state.score += r; state.completedTasks.push(id); save(); updateUI(); openTasksModal();
            }, 2000);
        }

        function startQuiz() {
            openModal('quiz');
            const q = QUIZ[Math.floor(Math.random()*QUIZ.length)];
            document.getElementById('q-txt').innerText = q.q;
            const d = document.getElementById('q-opts'); d.innerHTML = '';
            q.a.forEach((a, i) => d.innerHTML += `<button class="btn-main" style="margin-top:5px;background:#333" onclick="ansQuiz(${i},${q.c})">${a}</button>`);
        }
        function ansQuiz(s, c) {
            if(s===c) { state.score+=100; tg.showAlert("ØµØ­ +100"); closeModal('quiz'); updateUI(); save(); }
            else tg.showAlert("Ø®Ø·Ø£");
        }

        function openModal(id) { document.getElementById(id).classList.add('active'); }
        function closeModal(id) { 
            document.getElementById(id).classList.remove('active');
            if(id === 'daily' && dailyTimerInt) clearInterval(dailyTimerInt);
        }

    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Crypto Empire Fast</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-deep: #0b0c15;
            --primary: #f3ba2f; 
            --accent: #3498db;
            --glass: rgba(255, 255, 255, 0.05);
            --border: rgba(255, 255, 255, 0.1);
            --neon-blue: #00f3ff;
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background-color: var(--bg-deep);
            color: #fff;
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        /* --- Ø§Ù„Ø®Ù„ÙÙŠØ© (Ø§Ù„ÙØ¶Ø§Ø¡ Ø§Ù„Ø¹Ù…ÙŠÙ‚) --- */
        .cosmic-bg {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
            background: radial-gradient(circle at 50% -20%, #1a1a2e, #000);
        }
        .nebula {
            position: absolute;
            width: 100%; height: 100%;
            background: 
                radial-gradient(circle at 80% 20%, rgba(188, 19, 254, 0.15) 0%, transparent 40%),
                radial-gradient(circle at 20% 80%, rgba(0, 243, 255, 0.1) 0%, transparent 40%);
            animation: pulseBg 10s ease-in-out infinite alternate;
        }

        @keyframes pulseBg {
            0% { opacity: 0.5; transform: scale(1); }
            100% { opacity: 1; transform: scale(1.1); }
        }

        /* --- Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© --- */
        .header {
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border);
        }

        .rank-badge {
            background: rgba(0,0,0,0.5);
            padding: 5px 15px;
            border-radius: 20px;
            border: 1px solid var(--primary);
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .score-container {
            text-align: center;
            margin-top: 20px;
        }

        .score-val {
            font-size: 3.8rem;
            font-weight: 900;
            text-shadow: 0 0 20px rgba(255,255,255,0.2);
        }

        /* --- Ø§Ù„Ø¹Ù…Ù„Ø© --- */
        .game-area {
            flex-grow: 1;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .coin-skin {
            width: 260px;
            height: 260px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 6rem;
            cursor: pointer;
            transition: all 0.1s;
            position: relative;
            z-index: 10;
            box-shadow: 0 0 50px rgba(0,0,0,0.5);
        }
        
        /* Ø£Ø´ÙƒØ§Ù„ Ø§Ù„Ø¹Ù…Ù„Ø© */
        .skin-bronze {
            background: radial-gradient(circle at 30% 30%, #cd7f32, #8c5822);
            border: 8px solid #5d3a15;
            box-shadow: 0 0 30px rgba(205, 127, 50, 0.3);
        }
        .skin-silver {
            background: radial-gradient(circle at 30% 30%, #e0e0e0, #7f8c8d);
            border: 8px solid #555;
            box-shadow: 0 0 40px rgba(255, 255, 255, 0.3);
        }
        .skin-gold {
            background: radial-gradient(circle at 30% 30%, #ffd700, #f39c12);
            border: 8px solid #b76e05;
            box-shadow: 0 0 50px rgba(255, 215, 0, 0.5);
        }
        .skin-diamond {
            background: radial-gradient(circle at 30% 30%, #00f3ff, #2980b9);
            border: 8px solid #008cff;
            box-shadow: 0 0 60px rgba(0, 243, 255, 0.6);
            animation: diamondPulse 2s infinite;
        }

        .coin-skin:active { transform: scale(0.94); }

        /* --- Ø´Ø±ÙŠØ· Ø§Ù„Ø·Ø§Ù‚Ø© --- */
        .energy-wrapper {
            margin: 0 20px 10px 20px;
            background: #1a1a1a;
            border-radius: 12px;
            padding: 15px;
            border: 1px solid var(--border);
        }
        .energy-bar-bg {
            background: #000;
            height: 10px;
            border-radius: 5px;
            overflow: hidden;
            margin-top: 5px;
        }
        .energy-fill {
            height: 100%;
            width: 100%;
            background: linear-gradient(90deg, #ff0055, #ffcc00);
            transition: width 0.3s linear; /* Ø­Ø±ÙƒØ© Ø³Ù„Ø³Ø© */
        }

        /* --- Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ø³ÙÙ„ÙŠØ© --- */
        .bottom-nav {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            padding: 0 20px 30px 20px;
        }
        
        .nav-btn {
            background: var(--glass);
            border: 1px solid var(--border);
            color: white;
            padding: 16px;
            border-radius: 15px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        /* --- Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© --- */
        .modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 999;
            display: none;
            justify-content: center;
            align-items: flex-end;
        }
        .modal.open { display: flex; animation: slideUp 0.3s ease; }
        @keyframes slideUp { from {transform: translateY(100%)} to {transform: translateY(0)} }

        .modal-body {
            background: #15151e;
            width: 100%;
            border-radius: 25px 25px 0 0;
            padding: 25px;
            border-top: 2px solid var(--primary);
            max-height: 80vh;
            overflow-y: auto;
        }

        .task-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255,255,255,0.03);
            margin-bottom: 10px;
            padding: 15px;
            border-radius: 12px;
            border: 1px solid var(--border);
        }
        .task-info h4 { margin: 0; font-size: 1rem; }
        .task-info p { margin: 3px 0 0 0; font-size: 0.8rem; color: #aaa; }
        
        .btn-claim {
            background: var(--primary);
            color: #000;
            border: none;
            padding: 8px 20px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
        }
        
        /* --- Ø§Ù„Ù…ØªØ¬Ø± --- */
        .shop-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .shop-item { background: #20202a; padding: 15px; border-radius: 15px; text-align: center; border: 1px solid var(--border); }
        .shop-icon { font-size: 2.5rem; margin-bottom: 10px; display: block;}
        .shop-price { color: var(--neon-blue); font-size: 0.9rem; margin-top: 5px; }

    </style>
</head>
<body>

    <div class="cosmic-bg"><div class="nebula"></div></div>

    <div class="header">
        <div class="rank-badge" id="rank-display">
            <span>ğŸ¥‰</span> <span id="rank-name">Ø¨Ø±ÙˆÙ†Ø²ÙŠ</span>
        </div>
        <div>LVL <span id="level-num">1</span></div>
    </div>

    <div class="score-container">
        <div class="score-val" id="score">0</div>
    </div>

    <div class="game-area">
        <div class="coin-skin skin-bronze" id="coin-btn" onclick="tap(event)">$</div>
    </div>

    <div class="energy-wrapper">
        <div style="display:flex; justify-content:space-between; font-size:0.9rem">
            <span>âš¡ Ø§Ù„Ø·Ø§Ù‚Ø© (Ø³Ø±ÙŠØ¹)</span>
            <span id="energy-txt">10/10</span>
        </div>
        <div class="energy-bar-bg">
            <div class="energy-fill" id="energy-bar"></div>
        </div>
    </div>

    <div class="bottom-nav">
        <button class="nav-btn" onclick="openModal('tasks-modal')">ğŸ“‹ Ø§Ù„Ù…Ù‡Ø§Ù…</button>
        <button class="nav-btn" onclick="openModal('shop-modal')">ğŸ›ï¸ Ø§Ù„Ù…ØªØ¬Ø±</button>
    </div>

    <div class="modal" id="tasks-modal">
        <div class="modal-body">
            <h3 style="color:var(--primary)">Ù…Ù‡Ø§Ù… Ø§Ù„ØªØ¹Ø¨Ø¦Ø© âš¡</h3>
            <p style="font-size:0.8rem; color:#aaa">Ù†ÙØ° Ø§Ù„Ù…Ù‡Ø§Ù… Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ <b style="color:#fff">10 Ù†Ù‚Ø§Ø·</b> + ØªØ¹Ø¨Ø¦Ø© ÙƒØ§Ù…Ù„Ø©.</p>
            <div id="tasks-list-container"></div>
            <button class="nav-btn" style="width:100%; margin-top:20px; background:#333" onclick="closeModal('tasks-modal')">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
    </div>

    <div class="modal" id="shop-modal">
        <div class="modal-body">
            <h3 style="color:var(--neon-blue)">Ø³ÙˆÙ‚ Ø§Ù„ÙƒØ±ÙŠØ¨ØªÙˆ ğŸ›’</h3>
            <div class="shop-grid">
                <div class="shop-item">
                    <span class="shop-icon">â­</span>
                    <h4>Ù†Ø¬Ù…Ø© ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…</h4>
                    <div class="shop-price">500 Ù†Ù‚Ø·Ø©</div>
                </div>
                <div class="shop-item">
                    <span class="shop-icon">ğŸ’</span>
                    <h4>Ø¹Ù…Ù„Ø© TON</h4>
                    <div class="shop-price">Ù…ØºÙ„Ù‚ (LVL 10)</div>
                </div>
            </div>
            <button class="nav-btn" style="width:100%; margin-top:20px; background:#333" onclick="closeModal('shop-modal')">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
    </div>

    <script>
        // ==========================================
        // 1ï¸âƒ£ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù‚Ù†ÙˆØ§Øª (Ø¹Ø¯Ù„Ù‡Ø§ Ù‡Ù†Ø§)
        // ==========================================
        const allTasks = [
            { id: 'tg1', type: 'telegram', title: 'Ù‚Ù†Ø§Ø© Ø§Ù„Ø£Ø®Ø¨Ø§Ø±', url: 'https://t.me/YOUR_CHANNEL' },
            { id: 'insta1', type: 'insta', title: 'ØªØ§Ø¨Ø¹Ù†ÙŠ Ø§Ù†Ø³ØªÙ‚Ø±Ø§Ù…', url: 'https://instagram.com/YOUR_USER' },
            { id: 'yt1', type: 'youtube', title: 'Ø§Ø´ØªØ±Ùƒ ÙŠÙˆØªÙŠÙˆØ¨', url: 'https://youtube.com' }
        ];

        // ==========================================
        // 2ï¸âƒ£ Ù…Ø­Ø±Ùƒ Ø§Ù„Ù„Ø¹Ø¨Ø©
        // ==========================================
        let score = localStorage.getItem('score_v4') ? parseInt(localStorage.getItem('score_v4')) : 0;
        let energy = 10;
        const maxEnergy = 10;
        let claimedTasks = JSON.parse(localStorage.getItem('claimedTasksV4')) || [];

        // âš¡ ØªØ¹Ø¯ÙŠÙ„: Ø³Ø±Ø¹Ø© Ø§Ù„ØªØ¹Ø¨Ø¦Ø© ÙƒÙ„ 3 Ø«ÙˆØ§Ù†ÙŠ
        const refillSpeed = 3000; 

        updateUI();
        renderTasks();

        function tap(e) {
            if (energy > 0) {
                score++;
                energy--;
                localStorage.setItem('score_v4', score);
                updateUI();
                showFloat(e.clientX, e.clientY);
                if(navigator.vibrate) navigator.vibrate(30);
            } else {
                openModal('tasks-modal');
                if(navigator.vibrate) navigator.vibrate([50, 50, 50]);
            }
        }

        function updateUI() {
            document.getElementById('score').innerText = score.toLocaleString();
            document.getElementById('energy-txt').innerText = `${energy}/${maxEnergy}`;
            document.getElementById('energy-bar').style.width = (energy/maxEnergy*100) + '%';
            updateRankAndSkin();
        }

        // Ù†Ø¸Ø§Ù… Ø§Ù„Ø±ØªØ¨ ÙˆØªØºÙŠÙŠØ± Ø§Ù„Ø´ÙƒÙ„
        function updateRankAndSkin() {
            const coinBtn = document.getElementById('coin-btn');
            const rankName = document.getElementById('rank-name');
            const levelNum = document.getElementById('level-num');

            coinBtn.classList.remove('skin-bronze', 'skin-silver', 'skin-gold', 'skin-diamond');

            if (score < 500) {
                coinBtn.classList.add('skin-bronze');
                rankName.innerText = "Ø¨Ø±ÙˆÙ†Ø²ÙŠ"; levelNum.innerText = "1";
            } else if (score < 2000) {
                coinBtn.classList.add('skin-silver');
                rankName.innerText = "ÙØ¶ÙŠ"; levelNum.innerText = "2"; coinBtn.innerText = "ğŸ¥ˆ";
            } else if (score < 10000) {
                coinBtn.classList.add('skin-gold');
                rankName.innerText = "Ø°Ù‡Ø¨ÙŠ"; levelNum.innerText = "3"; coinBtn.innerText = "ğŸ¥‡";
            } else {
                coinBtn.classList.add('skin-diamond');
                rankName.innerText = "Ù…Ø§Ø³ÙŠ"; levelNum.innerText = "MAX"; coinBtn.innerText = "ğŸ’";
            }
        }

        // ==========================================
        // 3ï¸âƒ£ Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ù‡Ø§Ù… (Ø¬Ø§Ø¦Ø²Ø© 10 Ù†Ù‚Ø§Ø·)
        // ==========================================
        function renderTasks() {
            const container = document.getElementById('tasks-list-container');
            container.innerHTML = ''; 

            allTasks.forEach(task => {
                const isClaimed = claimedTasks.includes(task.id);
                let icon = 'ğŸ”—';
                if(task.type === 'telegram') icon = 'âœˆï¸';
                if(task.type === 'insta') icon = 'ğŸ“¸';
                if(task.type === 'youtube') icon = 'ğŸ”´';

                const taskHtml = `
                <div class="task-item" style="${isClaimed ? 'opacity:0.5' : ''}">
                    <div class="task-info" style="display:flex; gap:10px; align-items:center">
                        <span style="font-size:1.5rem">${icon}</span>
                        <div>
                            <h4>${task.title}</h4>
                            <p style="color:#f3ba2f">+10 Ù†Ù‚Ø§Ø· ÙÙ‚Ø·</p>
                        </div>
                    </div>
                    ${isClaimed 
                        ? '<span style="color:#2ecc71">âœ… ØªÙ…</span>' 
                        : `<button class="btn-claim" id="btn-${task.id}" onclick="startTask('${task.id}', '${task.url}')">ØªÙ†ÙÙŠØ°</button>`
                    }
                </div>
                `;
                container.innerHTML += taskHtml;
            });
        }

        function startTask(taskId, url) {
            const btn = document.getElementById(`btn-${taskId}`);
            window.open(url, '_blank');
            btn.innerText = "ØªØ­Ù‚Ù‚ â³";
            btn.style.background = "#e67e22";
            btn.onclick = function() { verifyTask(taskId); };
        }

        function verifyTask(taskId) {
            const isConfirmed = confirm("âš ï¸ Ù‡Ù„ Ø§Ø´ØªØ±ÙƒØª Ø¨Ø§Ù„ÙØ¹Ù„ØŸ Ø³ÙŠØªÙ… Ù…Ø±Ø§Ø¬Ø¹Ø© Ø­Ø³Ø§Ø¨Ùƒ ÙˆØ­Ø¸Ø±Ùƒ Ø¥Ø°Ø§ Ù„Ù… ØªØ´ØªØ±Ùƒ.");
            if (isConfirmed) {
                energy = maxEnergy;
                
                // âš¡ ØªØ¹Ø¯ÙŠÙ„: Ø§Ù„Ø¬Ø§Ø¦Ø²Ø© 10 Ù†Ù‚Ø§Ø· ÙÙ‚Ø·
                score += 10; 
                
                updateUI();
                claimedTasks.push(taskId);
                localStorage.setItem('claimedTasksV4', JSON.stringify(claimedTasks));
                renderTasks();
                closeModal('tasks-modal');
                alert("ØªÙ… Ø¥Ø¶Ø§ÙØ© 10 Ù†Ù‚Ø§Ø· ÙˆØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø·Ø§Ù‚Ø©! âœ…");
            }
        }

        // ==========================================
        // 4ï¸âƒ£ Ø§Ù„ØªØ¹Ø¨Ø¦Ø© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ø§Ù„Ø³Ø±ÙŠØ¹Ø©
        // ==========================================
        setInterval(() => {
            if (energy < maxEnergy) {
                energy++; // ØªØ²ÙŠØ¯ Ø§Ù„Ø·Ø§Ù‚Ø© 1
                updateUI();
            }
        }, refillSpeed); // ÙƒÙ„ 3 Ø«ÙˆØ§Ù†ÙŠ

        // Ø£Ø¯ÙˆØ§Øª Ù…Ø³Ø§Ø¹Ø¯Ø©
        function openModal(id) { document.getElementById(id).classList.add('open'); }
        function closeModal(id) { document.getElementById(id).classList.remove('open'); }
        function showFloat(x, y) {
            const el = document.createElement('div');
            el.innerText = '+1'; el.style.position = 'fixed'; el.style.left = x+'px'; el.style.top = y+'px';
            el.style.color = '#fff'; el.style.pointerEvents = 'none'; el.style.animation = 'floatUp 0.8s forwards';
            document.body.appendChild(el);
            setTimeout(() => el.remove(), 800);
        }
        const styleSheet = document.createElement("style");
        styleSheet.innerText = `@keyframes floatUp { 0% {transform:translateY(0);opacity:1;} 100% {transform:translateY(-50px);opacity:0;} }`;
        document.head.appendChild(styleSheet);

    </script>
</body>
</html>
